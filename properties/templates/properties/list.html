{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Properties — North Cyprus" %}{% endblock %}
{% block content %}

<style>
  :root{
    --ink:#0f172a;
    --muted:#5b6b83;
    --line:#e6e9f0;
    --brand:#0b6aa8;
    --brand-2:#095782;
    --card:#fff;
    --shadow:0 8px 22px rgba(16,24,40,.10);
    --radius:12px;
  }

  h1{
    margin: 0 0 10px;
    font-size: 1.6rem;
    letter-spacing: .2px;
  }

  .filters{
    display:flex; flex-wrap:wrap; gap:10px; margin-bottom:16px; align-items:center;
    background:#fff; border:1px solid var(--line); border-radius:12px; padding:10px;
    box-shadow: var(--shadow);
  }
  .filters input, .filters select{
    flex:0 0 160px;
    padding:10px 12px;
    border:1px solid var(--line);
    border-radius:10px;
    font-size:.95rem;
    background:#fff;
    outline:none;
    transition: border-color .15s ease, box-shadow .15s ease;
  }
  .filters input::placeholder{ color:#9aa7b5; }
  .filters input:focus, .filters select:focus{
    border-color: var(--brand);
    box-shadow: 0 0 0 3px rgba(11,106,168,.15);
  }

  .filters button{
    padding:10px 14px;
    border:0;
    border-radius:10px;
    background: linear-gradient(180deg, #0fa1e6 0%, #0b6aa8 100%);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    box-shadow: 0 6px 16px rgba(11,106,168,.20);
    transition: filter .15s ease, box-shadow .15s ease, transform .05s ease;
  }
  .filters button:hover{ filter:brightness(.98); box-shadow:0 10px 22px rgba(11,106,168,.26); }
  .filters button:active{ transform: translateY(1px); }

  .grid{
    display:grid; gap:16px; grid-template-columns:1fr;
  }
  @media (min-width:640px){ .grid{ grid-template-columns: repeat(2,1fr); } }
  @media (min-width:980px){ .grid{ grid-template-columns: repeat(3,1fr); } }

  .card{
    background: var(--card);
    border:1px solid var(--line);
    border-radius: var(--radius);
    overflow:hidden;
    box-shadow: var(--shadow);
    transition: transform .12s ease, box-shadow .18s ease;
  }
  .card:hover{
    transform: translateY(-3px);
    box-shadow: 0 14px 28px rgba(16,24,40,.14);
  }

  .cover{
    display:block; width:100%; height:200px; object-fit:cover; background:#eef2f7;
    transition: filter .2s ease, transform .2s ease;
  }
  .card:hover .cover{ filter:brightness(.98); transform: scale(1.01); }

  .pad{ padding:12px 14px; }

  .title{
    margin:0 0 4px;
    font-size:1.05rem;
    line-height:1.25;
  }
  .title a{
    text-decoration:none; color: var(--brand);
  }
  .title a:hover{ text-decoration:underline; }

  .price{
    font-weight:800;
    margin:2px 0;
    color: var(--ink);
  }
  .meta{
    color:#55627a; font-size:.95rem; margin-top:4px;
  }

  .clamp2{
    display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
  }

  .card-link{ text-decoration:none; color:inherit; display:block; }
  .card-link:hover .card{
    transform: translateY(-4px);
    box-shadow: 0 16px 32px rgba(16,24,40,.16);
  }
</style>

<h1>{% trans "Properties" %}</h1>

{# translate placeholders safely #}
{% trans "City" as ph_city %}
{% trans "Min Price" as ph_min %}
{% trans "Max Price" as ph_max %}
{% trans "Min Beds" as ph_beds %}
{% trans "Filter" as btn_filter %}

<form method="get" class="filters">
  <input name="city" placeholder="{{ ph_city }}" value="{{ request.GET.city }}">
  <input name="min" placeholder="{{ ph_min }}" value="{{ request.GET.min }}">
  <input name="max" placeholder="{{ ph_max }}" value="{{ request.GET.max }}">
  <input name="beds" placeholder="{{ ph_beds }}" value="{{ request.GET.beds }}">
  <button type="submit">{{ btn_filter }}</button>
</form>

<div class="grid">
  {% for p in properties %}
    <a href="{{ p.get_absolute_url }}" class="card-link">
      <article class="card">
        {% if p.cover %}
          <img class="cover" src="{{ p.cover.url }}" alt="{{ p.title }}">
        {% else %}
          <div class="cover"></div>
        {% endif %}
        <div class="pad">
          <h3 class="title clamp2">{{ p.title }}</h3>
          <div class="price">${{ p.price }}</div>
          <div class="meta">
            {% blocktrans with city=p.city beds=p.bedrooms baths=p.bathrooms size=p.size_sqm %}
            {{ city }} · {{ beds }} bd · {{ baths }} ba · {{ size }} m²
            {% endblocktrans %}
          </div>
        </div>
      </article>
    </a>
  {% empty %}
    <p>{% trans "Unfortunately, no properties match your criteria." %}</p>
  {% endfor %}
</div>

{% endblock %}
